# Кінотеатр

## 1. Вимоги

Система призначена для **комплексного управління діяльністю кінотеатру** — зберігання інформації про фільми, жанри, зали, місця, сеанси, клієнтів та бронювання квитків.  
Вона підтримує роботу **адміністратора** (керування репертуаром, залами й тарифами) і **клієнта** (перегляд фільмів, бронювання місць, перегляд історії бронювань).

### Потреби зацікавлених сторін

#### Адміністратор кінотеатру має:

- додавати/редагувати фільми, жанри, сеанси та зали;
- контролювати заповненість місць і статистику продажів;
- переглядати інформацію про клієнтів і їх бронювання;
- змінювати ціну квитка на основі його типу та часу показу.

#### Клієнт має:

- переглядати афішу фільмів і розклад сеансів;
- обирати зал і місце на конкретний сеанс;
- оформляти бронювання квитків.

### Дані для зберігання

- Інформація про клієнтів (ім’я, прізвище, email, телефон).
- Інформація про фільми (назва, обмеження за віком, тривалість, рік випуску, опис).
- Жанри фільмів.
- Зали кінотеатру (номер, кількість місць).
- Місця (ряд, номер, тип місця).
- Сеанси (дата, час, фільм, зал).
- Бронювання (дата, статус, ціна, клієнт).
- Заброньовані місця для кожного бронювання.
- Тарифи (початок та кінець часового діапазону, множник ціни).

### Бізнес-правила

- Один фільм може належати до кількох жанрів.
- Один фільм може мати кілька сеансів у різних залах.
- Один клієнт може мати кілька бронювань.
- Одне бронювання може охоплювати кілька місць.
- Кожне місце належить певному залу.
- Сеанс пов’язує фільм, зал і конкретний час.
- Ціна квитка залежить від типу місця та часу показу.

---

## 2. ER-діаграма

![ERD](img/cinema.drawio.png)

---

## 3. Список сутностей та атрибутів

### Customer (Клієнт)

- `customer_id` – ідентифікатор клієнта (PK);
- `first_name` – ім’я клієнта;
- `last_name` – прізвище клієнта;
- `email` – адреса електронної пошти;
- `phone` – номер телефону.

### Movie (Фільм)

- `movie_id` – ідентифікатор фільму (PK);
- `title` – назва;
- `age_limit` – вікове обмеження;
- `duration_min` – тривалість у хвилинах;
- `release_year` – рік випуску;
- `description` – короткий опис.

### Genre (Жанр)

- `genre_id` – ідентифікатор жанру (PK);
- `name` – назва жанру.

### MovieGenre (Зв’язок Фільм–Жанр)

- `movie_id` – посилання на фільм (**FK → movie.movie_id**);
- `genre_id` – посилання на жанр (**FK → genre.genre_id**);

**PK:** (`movie_id`, `genre_id`)

### CinemaHall (Кінозал)

- `hall_id` – ідентифікатор залу;
- `hall_number` – номер залу;
- `capacity` – кількість місць у залі.

### Seat (Місце)

- `seat_id` – ідентифікатор місця (PK);
- `row_number` – номер ряду;
- `seat_number` – номер місця у ряду;
- `seat_type` – тип місця (звичайне, VIP);
- `base_price` – базова ціна;
- `hall_id` – посилання на зал (**FK → cinema_hall.hall_id**).

### Showtime (Сеанс)

- `showtime_id` – ідентифікатор сеансу (PK);
- `show_date` – дата показу;
- `show_time` – час показу;
- `movie_id` – посилання на фільм (**FK → movie.movie_id**);
- `hall_id` – посилання на зал (**FK → cinema_hall.hall_id**).

### Booking (Бронювання)

- `booking_id` – ідентифікатор бронювання (PK);
- `total_price` – загальна вартість;
- `status` – статус («в процесі», «сплачено», «скасовано»);
- `booking_date` – дата бронювання;
- `customer_id` – посилання на клієнта (**FK → customer.customer_id**);
- `showtime_id` – посилання на сеанс (**FK → showtime.showtime_id**).

### BookingSeat (Місце в бронюванні)

- `showtime_id` – посилання на сеанс (**FK → showtime.showtime_id**);
- `seat_id` – посилання на місце (**FK → seat.seat_id**);
- `booking_id` – посилання на бронювання (**FK → booking.booking_id**);
- `tariff_id` – посилання на тариф (**FK → tariff.tariff_id**);
- `final_price` – підрахована ціна за квиток.

**PK:** (`showtime_id`, `seat_id`)

### Tariff (Тариф)

- `tariff_id` – ідентифікатор тарифу (PK);
- `name` – назва тарифу;
- `start_time` – початок часового діапазону;
- `end_time` – кінець часового діапазону;
- `price_multiplier` – множник ціни.

---

## 3.1 Зв’язки між сутностями

| Зв’язок                       | Тип   | Опис                                                    |
| ----------------------------- | ----- | ------------------------------------------------------- |
| Customer – Booking            | 1 : N | Один клієнт може мати багато бронювань                  |
| Movie – MovieGenre – Genre    | M : N | Один фільм може мати кілька жанрів і навпаки            |
| Movie – Showtime              | 1 : N | Один фільм показується у багатьох сеансах               |
| CinemaHall – Seat             | 1 : N | Один зал містить багато місць                           |
| CinemaHall – Showtime         | 1 : N | Один зал приймає багато сеансів                         |
| Showtime – BookingSeat – Seat | M : N | Одне місце може бути використане у багатьох сеансах     |
| Booking – BookingSeat         | 1 : N | Одне бронювання може містити кілька місць               |
| Tariff – BookingSeat          | 1 : N | Один тариф може бути застосований до багатьох бронювань |

---

## 4. Припущення та обмеження

- Кожне місце можна забронювати лише один раз на конкретний сеанс.
- Один клієнт може мати кілька активних бронювань.
- Зал повинен мати принаймні одне місце.
- В одному залі не може бути двох місць із однаковим номером і рядом.
- Кожен фільм має принаймні один жанр.
- Ціна квитка визначається типом місця і може бути різною для різних сеансів.
- Початковий час дії тарифу має бути менше за кінцевий.
- Тариф застосовується до всіх квитків, час показу яких потрапляє в межі його дії.
- Один сеанс може мати лише один тариф у момент бронювання (для спрощення розрахунків).
